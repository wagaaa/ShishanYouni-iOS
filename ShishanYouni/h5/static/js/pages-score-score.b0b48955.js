(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-score-score"],{"0d40":function(t,e,a){"use strict";var i=a("1335"),s=a.n(i);s.a},1335:function(t,e,a){var i=a("6aa6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("80624b58",i,!0,{sourceMap:!1,shadowMode:!1})},6626:function(t,e,a){"use strict";a.r(e);var i=a("b51c"),s=a("e2ba");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("0d40");var c,l=a("f0c5"),o=Object(l["a"])(s["default"],i["b"],i["c"],!1,null,"79352aec",null,!1,i["a"],c);e["default"]=o.exports},"6aa6":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.tip[data-v-79352aec]{margin:0 %?30?% %?30?% %?30?%;color:#aaa}.header[data-v-79352aec]{position:absolute;top:%?-50?%;left:0;height:%?50?%;width:%?160?%;border-radius:%?10?% 0 0 0;background-color:#fff;padding-left:%?20?%}.header[data-v-79352aec]::after{position:absolute;top:0;right:0;content:"";border-right:%?20?% solid #f1f1f1;border-bottom:%?50?% solid #fff}.icon[data-v-79352aec]{display:inline;margin-right:%?10?%}.result[data-v-79352aec]{font-weight:700}.statistics[data-v-79352aec]{border-radius:0 %?10?% %?10?% %?10?%!important;margin-top:%?100?%!important;position:relative;line-height:%?50?%;overflow:visible!important}.cal[data-v-79352aec]{height:10vh;position:relative}.cal-btn[data-v-79352aec]{position:absolute;right:0;top:%?-80?%}.scroll-Y[data-v-79352aec]{height:80vh}.right[data-v-79352aec]{text-align:right}.cu-form-group[data-v-79352aec]{background-color:#fff;padding:%?1?% %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;min-height:%?80?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:%?10?%}.btn[data-v-79352aec]{margin-top:%?10?%;margin-right:%?10?%;font-size:%?20?%}.text[data-v-79352aec]{font-size:%?40?%;margin-top:%?20?%}.course-name[data-v-79352aec]{width:%?588?%}',""]),t.exports=e},b51c:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",[a("u-navbar",{attrs:{"is-back":!0,"back-text":"返回",title:"成绩查询"}})],1),a("v-uni-view",{staticClass:"margin"},[a("v-uni-view",{staticClass:"cu-form-group round"},[a("v-uni-view",{staticClass:"title"},[t._v("学年")]),a("v-uni-picker",{attrs:{value:t.yearindex,range:t.years,"range-key":"value"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.YearChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.yearindex>-1?t.years[t.yearindex].value:"--请选择--"))])],1)],1),a("v-uni-view",{staticClass:" cu-form-group round",staticStyle:{"margin-top":"1.5vh"}},[a("v-uni-view",{staticClass:"title"},[t._v("学期")]),a("v-uni-picker",{attrs:{value:t.termindex,range:t.terms,"range-key":"value"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.TermChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.termindex>-1?t.terms[t.termindex].value:"--请选择--"))])],1)],1),a("v-uni-view",{staticClass:"right btn",staticStyle:{"margin-top":"1.5vh"}},[a("v-uni-button",{staticClass:"cu-btn bg-cyan round lg shadow",attrs:{size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.requestData()}}},[t._v("查询")])],1)],1),a("v-uni-view",{staticStyle:{"margin-left":"30rpx"}},[a("v-uni-view",{staticClass:"text"},[t._v("姓名："+t._s(t.studentName))]),a("v-uni-view",{staticClass:"text"},[t._v("班级："+t._s(t.className))])],1),t.nodata?a("v-uni-view",{staticClass:"text-center text-grey",staticStyle:{"margin-top":"10vh"}},[a("v-uni-text",[t._v("未查询到该学期成绩信息")])],1):t._e(),t.hackReset?a("v-uni-view",{staticClass:"cu-card article"},t._l(t.baseTableData,(function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item shadow"},[a("v-uni-view",{staticClass:"flex justify-between"},[a("v-uni-view",{staticClass:"title course-name"},[a("v-uni-view",{staticClass:"text-cut"},[t._v(t._s(e.kcmc))])],1),a("v-uni-view",{},[a("v-uni-checkbox-group",{on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.checkChange(i)}}},[a("v-uni-view",{staticClass:"margin"},[a("v-uni-checkbox",{staticClass:"grey",staticStyle:{float:"right",transform:"scale(0.7)"},attrs:{checked:!0}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showDetail(i)}}},[a("v-uni-view",{staticClass:"desc"},[a("v-uni-view",[a("v-uni-text",[t._v("成绩："+t._s(e.cj))]),a("v-uni-text",{staticStyle:{"margin-left":"100rpx"}},[t._v("绩点："+t._s(e.jd))]),a("v-uni-text",{staticStyle:{"margin-left":"100rpx"}},[t._v("学分："+t._s(e.xf))])],1)],1)],1)],1)})),1):t._e(),t.baseTableData.length>0&&!0===t.hackReset?a("v-uni-view",{staticClass:"cu-card article"},[a("v-uni-view",{staticClass:"cu-item shadow statistics grid padding-sm"},[a("v-uni-view",{staticClass:"header"},[t._v("成绩统计")]),a("v-uni-button",{staticClass:"cu-btn bg-cyan round cal-btn",attrs:{size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CalGPA.apply(void 0,arguments)}}},[t._v("统计成绩")]),a("v-uni-view",[a("v-uni-view",{staticClass:"icon cuIcon-ellipse text-orange"}),a("v-uni-text",[t._v("平均学分绩点（GPA）："),a("v-uni-text",{staticClass:"result"},[t._v(t._s(t.GPA))])],1)],1),a("v-uni-view",[a("v-uni-view",{staticClass:"icon cuIcon-ellipse text-yellow"}),a("v-uni-text",[t._v("获得学分："),a("v-uni-text",{staticClass:"result"},[t._v(t._s(t.Credit))])],1)],1),a("v-uni-view",[a("v-uni-view",{staticClass:"icon cuIcon-ellipse text-olive"}),a("v-uni-text",[t._v("不及格学分："),a("v-uni-text",{staticClass:"result"},[t._v(t._s(t.failCredit))])],1)],1),a("v-uni-view",[a("v-uni-view",{staticClass:"icon cuIcon-ellipse text-cyan"}),a("v-uni-text",[t._v("平均分："),a("v-uni-text",{staticClass:"result"},[t._v(t._s(t.aveScore))])],1)],1),a("v-uni-view",[a("v-uni-view",{staticClass:"icon cuIcon-ellipse text-blue"}),a("v-uni-text",[t._v("加权平均分："),a("v-uni-text",{staticClass:"result"},[t._v(t._s(t.weightedAveScore))])],1)],1)],1)],1):t._e(),t.baseTableData.length>0&&!0===t.hackReset?a("v-uni-view",{staticClass:"tip"},[a("v-uni-view",{staticClass:"text-red margin-bottom"},[t._v("* 注意取消勾选不需要参与计算的课程项。")]),t._v("Tips:"),a("br"),t._v("1.平均学分绩点详情请参照《华中农业大学本科生手册》【华中农业大学本科生学籍管理细则】第二十八条。"),a("br")],1):t._e()],1)},n=[]},bd88:function(t,e,a){"use strict";(function(t){a("b680"),a("acd8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{account:"",password:"",type:-1,hackReset:!1,nodata:!1,nowSchoolYear:2020,yearindex:1,termindex:1,year:[],term:["1","2"],GPA:"",Credit:"",failCredit:"",aveScore:"",weightedAveScore:"",weightedAveScore58:"",studentName:"",className:"",select:[],baseTableData:[],years:[{key:"0",value:"全部"},{key:"",value:""},{key:"",value:""},{key:"",value:""},{key:"",value:""}],terms:[{key:"0",value:"全部"},{key:"1",value:"1"},{key:"2",value:"2"}]}},onLoad:function(t){this.account=t.account,this.password=t.password,this.type=t.type,this.checkData()},onShow:function(){this.calYears()},methods:{calYears:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a<9?(this.nowSchoolYear=e-1,this.termindex=a>2?2:1):(this.nowSchoolYear=e,this.termindex=1);for(var i=0;i<4;i++){var s=this.nowSchoolYear-i,n=s+1;this.year.push(s+"-"+n),this.years[i+1].key=s,this.years[i+1].value=s+"-"+n}},CalGPA:function(){t.log(this.select);for(var e=0,a=0,i=0;i<this.select.length;i++)1==this.select[i]&&"缓考"!=this.baseTableData[i].cj&&(e+=this.baseTableData[i].xf*this.baseTableData[i].jd,a+=1*this.baseTableData[i].xf);var s=parseFloat(e/a).toFixed(2);this.GPA=s;var n=0;for(i=0;i<this.select.length;i++)1==this.select[i]&&this.baseTableData[i].bfzcj>=60&&(n+=1*this.baseTableData[i].xf);this.Credit=n;var c=0;for(i=0;i<this.select.length;i++)1==this.select[i]&&this.baseTableData[i].bfzcj<60&&"缓考"!=this.baseTableData[i].cj&&(c+=1*this.baseTableData[i].xf);this.failCredit=0===c?"0":c;var l=0,o=0;for(i=0;i<this.select.length;i++)1==this.select[i]&&"缓考"!=this.baseTableData[i].cj&&(l++,o+=1*this.baseTableData[i].bfzcj);this.aveScore=(o/l).toFixed(2);var r=0,u=0,v=0;for(i=0;i<this.select.length;i++)1==this.select[i]&&"缓考"!=this.baseTableData[i].cj&&(v=1*this.baseTableData[i].bfzcj,u+=1*this.baseTableData[i].xf,r+=v*this.baseTableData[i].xf);this.weightedAveScore=(r/u).toFixed(2),this.weightedAveScore58=(r/u*.58).toFixed(2)},YearChange:function(e){this.yearindex=e.detail.value,t.log(e.detail.value)},TermChange:function(e){this.termindex=e.detail.value,t.log(e.detail.value)},checkChange:function(e){t.log(e),t.log(this.select),this.select[e]=1-this.select[e]},checkData:function(){return!(this.account.length<2||this.password.length<2||this.type<0)||(uni.showModal({showCancel:!1,title:"错误",content:"未读取到账户信息"}),!1)},requestData:function(){if(this.checkData()){this.nodata=!1;var e=this;uni.showLoading({title:"请求中..."}),uni.request({url:"https://lion.hzau.edu.cn/jwxt/score",method:"POST",data:{xnm:e.years[e.yearindex].key,xqm:e.terms[e.termindex].key,yhm:e.account,mm:e.password,type:e.type},header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){if(2==a.data.code){var i=a.data.data;e.baseTableData=i,e.hackReset=!1,e.select=[],setTimeout((function(){e.hackReset=!0}),1),t.log(i);for(var s=0;s<i.length;s++)e.select.push(1);t.log(e.baseTableData),e.baseTableData.length>0?(e.studentName=e.baseTableData[0].xm,e.className=e.baseTableData[0].bj,e.CalGPA()):e.nodata=!0}else uni.showModal({showCancel:!1,title:"错误",content:"失败:"+a.data.msg})},fail:function(){uni.showModal({showCancel:!1,title:"错误",content:"网络请求失败"})},complete:function(){uni.hideLoading()}})}}}};e.default=i}).call(this,a("5a52")["default"])},e2ba:function(t,e,a){"use strict";a.r(e);var i=a("bd88"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a}}]);